---
title: 'Bifurcation Diagram'
description: 'Ein Einblick in die Wunderwelt der Mathematik!'
seo: '../images/bifurcation-diagram/seo.png'
cover: '../images/bifurcation-diagram/bifurcation_diagram_dark.png'
coverAlt: 'Bifurcation Diagram'
year: '2020'
order: 2020_0002
seeAlso:
  - 'morse-code'
technologies:
  - 'Javascript'
  - 'p5.js'
socials:
  github: 'https://github.com/fabiankachlock/Bifurcation_Diagram'
  web: /resources/bifurcation-diagram/demo/Bifurcation_Diagram/index.html
---

import BlogImage from '../BlogImage.vue';

# Das Bifurkationsdiagramm!

Letztens habe ich mich einem kleinen, lustigen Projekt gewidmet. Mein Ziel war es eine Bifurkation (oder auch Verzweigung) zu visualisieren. Die Bifurkation, die ich zeichnen möchte, ist eine der bekanntesten: Es ist die, für die logistische Gleichung $$x_n+1 = r * x_n * ( 1 - x_n )$$. Aber bevor ich starte über das Programm zu reden, möchte ich erste ein paar mathematische Hintergründe erklären.

Als aller erstes, eine Bifurkation ist das verdoppeln einer Periode, welches auftritt, während man einen Kontroll-Parameter verändert. In diesem Falle ist der Steuerparameter $$r$$, und die Verzweigungen tauchen, wie bei vielen anderen Beispielen, in einem festen Verhältnis auf: der Feigenbaum-Konstante. Während man r um einen kleinen Betrag bis 4 erhöht, kann man sehen, dass bei $$r = 3$$ sich der Graph aufteilt. Bei $$r \approx 3.44$$, teilen sich beide Arme des Graphs erneut, diesmal in eine Periode von $$4$$. Das geht so immer weiter, bis bei $$r \approx 3.5699$$ das deterministische Chaos beginnt.

## Aber woher kommen diese Perioden?

Um diese Frage zu beantworten, müssen wir die Funktion, die die logistische Gleichung beschreibt, von einem anderen Winkel aus betrachten.

Hier ist noch einmal die Funktion: $$x_n+1 = r * x_n * ( 1 - x_n )$$. $$x_n$$ stellt eine derzeitige Population. Aber nicht in einem absoluten Wert, sondern in einem relativen Wert zum theoretischen Maximum. Zum Beispiel ist $$0,5$$ eine diesjährige Population $$x_n$$ von Hasen. $$1$$ ist der theoretische Maximalwert. Dieser ist definiert durch die Natur, ein beeinflussender Faktor ist zu Beispiel der verfügbare Platz. Jetzt möchte ich die Population für das nächste Jahr berechnen.

Dafür muss ich den Wert von $$r$$. wissen. In diesen Fall ist $$r$$ die Wachstumsrate. Wenn man nur den Parameter $$r$$ nehmen würde, dann wäre das Ganze ein lineares System. Für $$0 < r < 1$$nimmt die Population mit der Zeit ab und stirbt irgendwann ganz aus. Für $$r > 1$$,nimmt die Population unendlich zu. In der Natur ist das nicht der Fall. In jedem Jahr sterben Hasen, sei es durch Feinde oder auch nur Altersschwäche. Der Term $$(1 - x_n)$$ repräsentiert genau diesen Rückgang der Population. Außerdem wird dadurch die Gleichung auch in ein dynamisches System umgewandelt. Man merkt eventuell auch, dass die Population im nächsten Jahr ausstirbt, wenn das theoretische Maximum von $$1$$ erreicht wird.

## Schauen wir uns doch mal ein einfaches Berechnungsbeispiel an.

Nehmen wir eine Population von $$0.4$$ mit einer Wachstumsrate von $$2$$. Setzt man nun diese Werte in die Gleichung ein, erhält man im nächsten Jahr eine relative Population von $$x = 0.48$$. Danach $$0.4992$$ und wenn man immer weiter über diese Gleichung iteriert, wird man sehen, dass sich die die Größe der Population kaum/gar nicht mehr verändert. Das bedeutet die Gleichgewichtspopulation liegt bei $$\approx 0.5$$. Das ist der Fall für $$1 \leq r < 3$$, nicht jedes Mal $$0.5$$, aber die Gleichgewichtspopulation wird sich bei einem Wert einpendeln.

import Period1Dark from '../images/bifurcation-diagram/period1_dark.png';
import Period1Light from '../images/bifurcation-diagram/period1_light.png';

<BlogImage
  dark={Period1Dark}
  light={Period1Light}
  alt="Hier sieht man, wie sich die Population entwickelt. (Für r = 2)"
/>

Setzt man nun $$r = 3$$ in der Funktion ein, verdoppelt sich das erste Mal die Periode. Nun pendelt die Gleichgewichtspopulation zwischen $$2$$ Werten hin und her.

import Period2Dark from '../images/bifurcation-diagram/period2_dark.png';
import Period2Light from '../images/bifurcation-diagram/period2_light.png';

<BlogImage dark={Period2Dark} light={Period2Light} alt="Hier sieht man eine Periode von 2." />

Bei $$r \approx 3.44$$ verdoppelt sich die Periode wieder, jetzt pendelt die Gleichgewichtspopulation zwischen $$4$$ Werten.

import Period4Dark from '../images/bifurcation-diagram/period4_dark.png';
import Period4Light from '../images/bifurcation-diagram/period4_light.png';

<BlogImage dark={Period4Dark} light={Period4Light} alt="Danach kommt eine Periode von 4." />

import Period8Dark from '../images/bifurcation-diagram/period8_dark.png';
import Period8Light from '../images/bifurcation-diagram/period8_light.png';

<BlogImage
  dark={Period8Dark}
  light={Period8Light}
  alt="Eine Periode von 8. Es ist verrückt, wie eine so einfache Funktion, Muster wie diese erzeugen kann."
/>

Letztendlich bei $$r \approx 3.5699$$ startet das Chaos.

import PeriodChaosDark from '../images/bifurcation-diagram/periods_chaos_dark.png';
import PeriodChaosLight from '../images/bifurcation-diagram/periods_chaos_light.png';

<BlogImage
  dark={PeriodChaosDark}
  light={PeriodChaosLight}
  alt="Chaos! Es ist fast schon traurig, dass nix davon zufällig ist, pure Mathematik!"
/>

Deterministisches Chaos, um genau zu sein. Hier kannst du jede Periode finden. Jedes x ist Teil irgendeiner Periode, egal ob $$128$$ or $$1354$$ oder etc. Es ist deterministisches Chaos, weil man theoretisch für jeden Wert den Startwert berechnen kann und somit auch den nächsten Wert vorhersagen kann. Praktisch ist das kaum möglich, weil man jeden Wert auf unendlich viele Kommastellen genau braucht.

## Das Programm

Genug Theorie, nun zum Programm. Als aller erstes, die Basics! Das Programm wird über die Konsole im Browser gesteuert. Durch das aufrufen von JavaScript Funktionen werden Anweisungen an das Programm geschickt

Disclaimer: Die Konsole ist (derzeit, PRs sind Willkommen) der einzige Weg dieses Programm zu kontrollieren.

Die Funktionen `help()` und `zoomHelp()` geben einen kleinen überblick über die Funktionen und ihre Anwendung, hier erkläre ich alles etwas genauer und umfassender. Wenn du das Script öffnest wird die Größe vom Browser Fenster gespeichert. Diese gespeicherte Größe wird später für das zeichnen der Graphen benötigt. Da das Programm nicht die aktuelle Größe im Auge behält, muss man die Funktion `resize()` aufrufen oder das Script neu laden, wenn die Größe des Browser Fensters sich geändert hat. Mit der `clearScreen()` Funktion wird das wird das Diagramm zurückgesetzt.

### Nun zum statischen Darstellen:

Hier habe ich einige Funktionen vorprogrammiert, damit man sich einige atemberaubend schöne Stellen der Funktion anschauen kann, ohne sich sorgen um Parameter zu machen. Diese sind `plot()` und `plotPointx()`.

Mit `plot()` kann man sich das gesamte Diagramm anschauen. Es startet bei $$r = 2.9$$ und geht bis $$r = 4$$. Es fängst deshalb erst bei $$r = 2.9$$an, weil davor nix passiert, nur eine langweilige Linie.

Bei `plotPointx()` hat man mehrere Optionen: `plotPoint2()`, `plotPoint1()`, `plotPoint02()`, `plotPoint005()`, `plotPoint0001()`, `plotPoint00005()`. Die Zahlenwerte repräsentieren Reichweiten von $$r$$. Zum Beispiel, bei `plotPoint02()` ist ein bestimmter Wert von $$r (0 < r < 4)$$ an der linken Seite des Bildschirms und $$r + 0.02$$ auf der rechten. Um das Diagramm zeichnen zu können, muss ich über die Funktion iterieren. Die Variable `iterations`bestimmt diesen Wert. Der Standartwert liegt bei $$500000$$, dieser kann mit der Funktion `setIterations(to)`verändert werden. Das Argument `to` wird der neue `iterations`-Wert sein. Ist dieser zu groß gewählt, kann das Zeichnen zu lange dauern, da dieser aber auch die Dichte der Punkte bestimmt, ist einer zu kleiner Wert auch sehr unvorteilhaft, da man dann kaum noch etwas erkennen kann.

Mit der `plotRange()` Funktion kann man sich jede beliebige Stelle des Diagramms ansehen. Dafür muss man aber mindestens 4 Argumente mitgeben.
Das erste heißt `from`. Dieses bestimmt den Wert von $$r$$ am linken Bildschirmrand. Der Wert sollte zwischen $$0$$ und $$4$$liegen. Das zweite Argument ist `to`, dies ist der Wert von $$r$$ am rechten Bildschirmrand. Auch er sollte zwischen $$0$$ und $$4$$ liegen und muss dazu noch größer als `from` sein.

Die nächsten 2 sind `minX` und `maxX`. Hierbei kann ich zwar $$x$$ nicht auf bestimmte Werte beschränken, jedoch aber das Sichtfeld. Zum Beispiel wenn ich `minX` auf $$0.2$$ und `maxX` auf $$0.6$$ setzte, kann ich nicht verhindern, dass es x-Werte kleiner als $$0.2$$ und größer als $$0.6$$ gibt, jedoch kann ich diese außerhalb des Sichtfelds zeichnen. Das abändern dieser Werte von $$0$$ und $$1$$ verhindert, dass das Diagramm gedehnt oder gestaucht wird.
Das 5. Argument (`iterations`) ist optional und wird standartmäßig auf den Wert der iterations Variable gesetzt. Das 6. Argument (`zoom`) wird nur von Programm benötigt.
Falls man die derzeitige Konfiguration des Diagramms wissen will, kann man `logPlot()` aufrufen.

Um den Zoom-Modus zu aktivieren muss man `zoomIn()` aufrufen, um heraus zu zoomen `zoomOut()` und um ihn wieder ganz auszustellen muss du `disableZoom()` aufrufen. Da das Zoomen sehr aufwendige Berechnungen enthält werden die Iterationen auf einen Standartwert von $$250000$$ herabgestellt, um eine bessere Lesitung zu liefern. Mit der Funktion `setZoomInterations(to)` lässt sich aber auch dieser verändern. Die Zoom-Rate kann durch die Funktion `setZommRate(to)` verändert werden. Der Zoomfaktor oder die Zoom-Rate ist der Faktor für das zoomen, das heißt ein Zoom-Faktor von $$2$$ zoomt das Diagramm x2 oder doppelt so groß.

Wenn einer der beiden Zoom-Modes aktiviert ist, kann man mit einem Klick im Diagramm zoomen. Die Stelle, die dabei angeklickt wird, wird danach in der Mitte sein. Dadurch, dass das Steuerparameter $$r$$ sehr "empfindlich" ist und immer innerhalb $$0 \leq r < 4$$ sein muss, können sehr komische Dinge oder gar nichts passieren, wenn $$r$$ diesen Bereich verlässt. Um dies zu verhindern, empfehle ich im Ausgangszustand (erreichbar mit `plot()`) nicht heraus zu zoomen oder in sehr groben Darstellung (eine Änderung von $$r$$ von links nach rechts von mehr als $$0.1$$) nicht mit einem Zoom-Faktor von 1 „herumzuschauen“.

import ChaosDark from '../images/bifurcation-diagram/bifurcation_chaos_dark.png';
import ChaosLight from '../images/bifurcation-diagram/bifurcation_chaos_light.png';

<BlogImage dark={ChaosDark} light={ChaosLight} alt="Hier ist ein Beispiel dafür, was mit zoomen möglich ist." />

Das ist es schon. Ich hoffe alles ist zu verstehen. Der Quellcode zum Projekt ist auch auf [Github](https://github.com/fabiankachlock/Bifurcation_Diagram) zu finden.
